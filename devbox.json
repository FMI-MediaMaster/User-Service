{
  "packages": [
    "eslint_d@14.3.0",
    "bruno@2.12.0",
    "docker@28.4.0",
    "nodejs@24.10.0"
  ],
  "env": {
    "DEVBOX_COREPACK_ENABLED": "true"
  },
  "shell": {
    "init_hook": [
      "pnpm install",
      "git remote get-url server-template >/dev/null 2>&1 || git remote add -f server-template https://github.com/FMI-MediaMaster/MediaMasterServerTemplate.git",
      "export SERVICE_NAME=$(basename -s .git \"$(git config --get remote.origin.url)\" | tr '[:upper:]' '[:lower:]')"
    ],
    "scripts": {
      "bruno": "nohup bruno >/dev/null 2>&1 &",
      "docker:build": "docker build --secret id=npmrc,src=.npmrc -t $SERVICE_NAME .",
      "docker:pull": "docker pull ghcr.io/fmi-mediamaster/$SERVICE_NAME:main",
      "docker:run:local": "ENV_FILE=\"$(pwd)/.env\" && source \"$ENV_FILE\" && docker run -d --rm -v \"$ENV_FILE:/app/.env\" -p $PORT:$PORT --name $SERVICE_NAME $SERVICE_NAME",
      "docker:run": "ENV_FILE=\"$(pwd)/.env\" && source \"$ENV_FILE\" && docker run -d --rm -v \"$ENV_FILE:/app/.env\" -p $PORT:$PORT --name $SERVICE_NAME ghcr.io/fmi-mediamaster/$SERVICE_NAME:main",
      "docker:stop": "docker stop $SERVICE_NAME"
    }
  }
}
